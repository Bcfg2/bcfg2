.
.TH "BCFG2\-ADMIN" "8" "August 2012" "" ""
.
.SH "NAME"
\fBbcfg2\-admin\fR \- Perform repository administration tasks
.
.SH "SYNOPSIS"
\fBbcfg2\-admin\fR [\-C \fIconfigfile\fR] \fImode\fR [\fImode args\fR] [\fImode options\fR]
.
.SH "DESCRIPTION"
\fBbcfg2\-admin\fR is used to perform Bcfg2 repository administration
.
.SH "OPTIONS"
.
.TP
\fB\-C\fR \fIconfigfile\fR
Specify alternate bcfg2\.conf location\.
.
.TP
\fB\-E\fR \fIencoding\fR
Specify the encoding of Cfg files\.
.
.TP
\fB\-Q\fR \fIrepository path\fR
Specify the path to the server repository\.
.
.TP
\fB\-S\fR \fIhttps://server:port\fR
Manually specify the server location (as opposed to using the value in bcfg2\.conf)\.
.
.TP
\fB\-d\fR
Enable debugging output\.
.
.TP
\fB\-h\fR
Print Usage information\.
.
.TP
\fB\-o\fR \fIlogfile path\fR
Writes a log to the specified path\.
.
.TP
\fB\-v\fR
Enable verbose output\.
.
.TP
\fB\-x\fR \fIpassword\fR
Use ’password’ for client communication\.
.
.TP
\fB\-\-ssl\-key=\fR\fIssl key\fR
Specifiy the path to the SSL key\.
.
.SH "MODES"
.
.TP
\fBbackup\fR
Create an archive of the entire Bcfg2 repository\.
.
.TP
\fBbundle\fR \fIaction\fR
Display details about the available bundles (See \fI\fBBUNDLE OPTIONS\fR\fR below)\.
.
.TP
\fBclient\fR \fIaction\fR \fIclient\fR [attribute=value]
Add, edit, or remove clients entries in metadata (See \fI\fBCLIENT OPTIONS\fR\fR below)\.
.
.TP
\fBcompare\fR \fIold\fR \fInew\fR
Compare two client configurations\. Can be used to verify consistent behavior between releases\. Determine differences between files or directories (See \fI\fBCOMPARE OPTIONS\fR\fR below)\.
.
.TP
\fBinit\fR
Initialize a new repository (interactive)\.
.
.TP
\fBminestruct\fR \fIclient\fR [\-f xml\-file] [\-g groups]
Build structure entries based on client statistics extra entries (See \fI\fBMINESTRUCT OPTIONS\fR\fR below)\.
.
.TP
\fBperf\fR
Query server for performance data\.
.
.TP
\fBpull\fR \fIclient\fR \fIentry\-type\fR \fIentry\-name\fR
Install configuration information into repo based on client bad entries (See \fI\fBPULL OPTIONS\fR\fR below)\.
.
.TP
\fBquery\fR [g=group] [p=profile] [\-f output\-file] [\-n] [\-c]
Search for clients based on group or profile (See \fI\fBQUERY OPTIONS\fR\fR below)\.
.
.TP
\fBreports\fR [init|load_stats|purge|scrub|update]
Interact with the dynamic reporting system (See \fI\fBREPORTS OPTIONS\fR\fR below)\.
.
.TP
\fBsnapshots\fR [init|dump|query|reports]
Interact with the Snapshots database (See \fI\fBSNAPSHOTS OPTIONS\fR\fR below)\.
.
.TP
\fBsyncdb\fR
Sync the Django ORM with the configured database\.
.
.TP
\fBtidy\fR
Remove unused files from repository\.
.
.TP
\fBviz\fR [\-H] [\-b] [\-k] [\-o png\-file]
Create a graphviz diagram of client, group and bundle information (See \fI\fBVIZ OPTIONS\fR\fR below)\.
.
.TP
\fBxcmd\fR
Provides a XML\-RPC Command Interface to the bcfg2\-server\.
.
.SS "BUNDLE OPTIONS"
.
.TP
\fBmode\fR
List all available xml bundles ’list\-xml’ or for all available genshi bundles ’list\-genshi’\. ’show’ provides an interactive dialog to get details about the available bundles\.
.
.SS "CLIENT OPTIONS"
.
.TP
\fBmode\fR
Add a client ’add’, delete a client ’del’, or ’list’ all client entries\.
.
.TP
\fBclient\fR
Specify the client’s name\.
.
.TP
\fBattribute=value\fR
Set attribute values when adding a new client\. Allowed attributes are ’profile’, ’uuid’, ’password’, ’location’, ’secure’, and ’address’\.
.
.SS "QUERY OPTIONS"
.
.TP
\fBb=bundle\fR
Specify a bundle to search for within client metadata\.
.
.TP
\fBg=group\fR
Specify a group to search within\.
.
.TP
\fBp=profile\fR
Specify a profile to search within\.
.
.TP
\fB\-f\fR \fIoutput file\fR
Write the results of the query to a file\.
.
.TP
\fB\-n\fR
Print the results, one on each line\.
.
.TP
\fB\-c\fR
Print the results, separated by commas\.
.
.SS "COMPARE OPTIONS"
.
.TP
\fBold\fR
Specify the location of the old configuration file\.
.
.TP
\fBnew\fR
Specify the location of the new configuration file\.
.
.SS "MINESTRUCT OPTIONS"
.
.TP
\fBclient\fR
Client whose metadata is to be searched for extra entries\.
.
.TP
\fB\-g\fR \fIgroups\fR
Hierarchy of groups in which to place the extra entries in\.
.
.TP
\fB\-f\fR \fIxml output file\fR
Specify the xml file in which to write the extra entries\.
.
.SS "PULL OPTIONS"
.
.TP
\fBclient\fR
Specify the name of the client to search for\.
.
.TP
\fBentry type\fR
Specify the type of the entry to pull\.
.
.TP
\fBentry name\fR
Specify the name of the entry to pull\.
.
.SS "REPORTS OPTIONS"
.
.TP
\fBinit\fR
Initialize the database\.
.
.TP
\fBload_stats\fR [\-s] [\-c] [\-03]
Load statistics data\.
.
.TP
\fBpurge\fR [\-\-client [n]] [\-\-days [n]] [\-\-expired]
Purge historic and expired data\.
.
.TP
\fBscrub\fR
Scrub the database for duplicate reasons and orphaned entries\.
.
.TP
\fBupdate\fR
Apply any updates to the reporting database\.
.
.SS "SNAPSHOTS OPTIONS"
.
.TP
\fBinit\fR
Initialize the snapshots database\.
.
.TP
\fBquery\fR
Query the snapshots database\.
.
.TP
\fBdump\fR
Dump some of the contents of the snapshots database\.
.
.TP
\fBreports\fR [\-a] [\-b] [\-e] [\-\-date=\fIMM\-DD\-YYYY\fR]
Generate reports for clients in the snapshots database\.
.
.SS "VIZ OPTIONS"
.
.TP
\fB\-H\fR
Include hosts in diagram\.
.
.TP
\fB\-b\fR
Include bundles in diagram\.
.
.TP
\fB\-o\fR \fIoutput file\fR
Write to outfile file instead of stdout\.
.
.TP
\fB\-k\fR
Add a shape/color key\.
.
.SH "SEE ALSO"
bcfg2\-info(8), bcfg2\-server(8)
